From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sat, 7 May 2016 23:33:08 -0400
Subject: [PATCH] Don't save empty scoreboard teams to scoreboard.dat


diff --git a/src/main/java/com/destroystokyo/paper/PaperConfig.java b/src/main/java/com/destroystokyo/paper/PaperConfig.java
index 750508267982046d0c08cffdd57c28459f7ce9c1..71cbf3a321dcf2ff2071d46ff2f117f512997f7d 100644
--- a/src/main/java/com/destroystokyo/paper/PaperConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperConfig.java
@@ -229,4 +229,9 @@ public class PaperConfig {
     private static void enablePlayerCollisions() {
         enablePlayerCollisions = getBoolean("settings.enable-player-collisions", true);
     }
+
+    public static boolean saveEmptyScoreboardTeams = false;
+    private static void saveEmptyScoreboardTeams() {
+        saveEmptyScoreboardTeams = getBoolean("settings.save-empty-scoreboard-teams", false);
+    }
 }
diff --git a/src/main/java/net/minecraft/scoreboard/ScoreboardSaveData.java b/src/main/java/net/minecraft/scoreboard/ScoreboardSaveData.java
index 732d70d8f10ea13ccb5e1cfebb20dbcbf7a0f214..04956a5340842f56745d2a2391048e9cc1fe2d6e 100644
--- a/src/main/java/net/minecraft/scoreboard/ScoreboardSaveData.java
+++ b/src/main/java/net/minecraft/scoreboard/ScoreboardSaveData.java
@@ -181,6 +181,7 @@ public class ScoreboardSaveData extends WorldSavedData {
 
         while (iterator.hasNext()) {
             ScorePlayerTeam scoreboardteam = (ScorePlayerTeam) iterator.next();
+            if (!com.destroystokyo.paper.PaperConfig.saveEmptyScoreboardTeams && scoreboardteam.func_96670_d().isEmpty()) continue; // Paper
             CompoundNBT nbttagcompound = new CompoundNBT();
 
             nbttagcompound.func_74778_a("Name", scoreboardteam.func_96661_b());
