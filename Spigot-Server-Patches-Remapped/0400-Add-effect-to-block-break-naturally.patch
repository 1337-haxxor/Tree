From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <Blake.Galbreath@GMail.com>
Date: Thu, 2 Jan 2020 12:25:07 -0600
Subject: [PATCH] Add effect to block break naturally


diff --git a/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java b/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java
index 362455b9d9479c4843397f60969f16b72035e1e9..73a2aa4c450e5f77f9b6e13c20967c52b924db3a 100644
--- a/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java
+++ b/src/main/java/org/bukkit/craftbukkit/block/CraftBlock.java
@@ -628,6 +628,13 @@ public class CraftBlock implements Block {
 
     @Override
     public boolean breakNaturally(ItemStack item) {
+        // Paper start
+        return breakNaturally(item, false);
+    }
+
+    @Override
+    public boolean breakNaturally(ItemStack item, boolean triggerEffect) {
+        // Paper end
         // Order matters here, need to drop before setting to air so skulls can get their data
         net.minecraft.block.BlockState iblockdata = this.getNMS();
         net.minecraft.block.Block block = iblockdata.func_177230_c();
@@ -637,6 +644,7 @@ public class CraftBlock implements Block {
         // Modelled off EntityHuman#hasBlock
         if (block != Blocks.field_150350_a && (item == null || !iblockdata.func_235783_q_() || nmsItem.func_150998_b(iblockdata))) {
             net.minecraft.block.Block.func_220054_a(iblockdata, world.getMinecraftWorld(), position, world.func_175625_s(position), null, nmsItem);
+            if (triggerEffect) world.func_217379_c(org.bukkit.Effect.STEP_SOUND.getId(), position, net.minecraft.block.Block.func_196246_j(block.func_176223_P())); // Paper
             result = true;
         }
 
