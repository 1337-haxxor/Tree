From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <Blake.Galbreath@GMail.com>
Date: Sat, 3 Oct 2020 20:32:25 -0500
Subject: [PATCH] Fix item locations dropped from campfires

Fixes #4259 by not flooring the blockposition among other weirdness

diff --git a/src/main/java/net/minecraft/tileentity/CampfireTileEntity.java b/src/main/java/net/minecraft/tileentity/CampfireTileEntity.java
index 8ef203a5ede0a7b80d5851950b64d42736981779..2563555602014ae8b28a9b00739c68e5f93e7def 100644
--- a/src/main/java/net/minecraft/tileentity/CampfireTileEntity.java
+++ b/src/main/java/net/minecraft/tileentity/CampfireTileEntity.java
@@ -5,6 +5,7 @@ import java.util.Random;
 import javax.annotation.Nullable;
 import net.minecraft.block.BlockState;
 import net.minecraft.block.CampfireBlock;
+import net.minecraft.entity.item.ItemEntity;
 import net.minecraft.inventory.IClearable;
 import net.minecraft.inventory.Inventory;
 import net.minecraft.inventory.InventoryHelper;
@@ -91,7 +92,11 @@ public class CampfireTileEntity extends TileEntity implements IClearable, ITicka
                     result = blockCookEvent.getResult();
                     itemstack1 = CraftItemStack.asNMSCopy(result);
                     // CraftBukkit end
-                    InventoryHelper.func_180173_a(this.field_145850_b, (double) blockposition.func_177958_n(), (double) blockposition.func_177956_o(), (double) blockposition.func_177952_p(), itemstack1);
+                    // Paper start
+                    ItemEntity droppedItem = new ItemEntity(this.field_145850_b, blockposition.func_177958_n() + 0.5D, blockposition.func_177956_o() + 0.5D, blockposition.func_177952_p() + 0.5D, itemstack1.func_77979_a(this.field_145850_b.field_73012_v.nextInt(21) + 10));
+                    droppedItem.func_213293_j(this.field_145850_b.field_73012_v.nextGaussian() * 0.05D, this.field_145850_b.field_73012_v.nextGaussian() * 0.05D + 0.2D, this.field_145850_b.field_73012_v.nextGaussian() * 0.05D);
+                    this.field_145850_b.func_217376_c(droppedItem);
+                    // Paper end
                     this.field_213987_a.set(i, ItemStack.field_190927_a);
                     this.func_213981_s();
                 }
