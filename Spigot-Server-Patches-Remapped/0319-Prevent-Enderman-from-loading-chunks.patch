From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Shane Freeder <theboyetronic@gmail.com>
Date: Tue, 18 Dec 2018 02:15:08 +0000
Subject: [PATCH] Prevent Enderman from loading chunks


diff --git a/src/main/java/net/minecraft/entity/monster/EndermanEntity.java b/src/main/java/net/minecraft/entity/monster/EndermanEntity.java
index 4a68c17fd5b97a1ead85b0106f29a552ce1092a1..5c69ab91d27f27537a3396fc10931341755f4720 100644
--- a/src/main/java/net/minecraft/entity/monster/EndermanEntity.java
+++ b/src/main/java/net/minecraft/entity/monster/EndermanEntity.java
@@ -434,7 +434,8 @@ public class EndermanEntity extends MonsterEntity implements IAngerable {
             int j = MathHelper.func_76128_c(this.field_179473_a.func_226278_cu_() + random.nextDouble() * 3.0D);
             int k = MathHelper.func_76128_c(this.field_179473_a.func_226281_cx_() - 2.0D + random.nextDouble() * 4.0D);
             BlockPos blockposition = new BlockPos(i, j, k);
-            BlockState iblockdata = world.func_180495_p(blockposition);
+            BlockState iblockdata = world.getTypeIfLoaded(blockposition); // Paper
+            if (iblockdata == null) return; // Paper
             Block block = iblockdata.func_177230_c();
             Vector3d vec3d = new Vector3d((double) MathHelper.func_76128_c(this.field_179473_a.func_226277_ct_()) + 0.5D, (double) j + 0.5D, (double) MathHelper.func_76128_c(this.field_179473_a.func_226281_cx_()) + 0.5D);
             Vector3d vec3d1 = new Vector3d((double) i + 0.5D, (double) j + 0.5D, (double) k + 0.5D);
@@ -474,7 +475,8 @@ public class EndermanEntity extends MonsterEntity implements IAngerable {
             int j = MathHelper.func_76128_c(this.field_179475_a.func_226278_cu_() + random.nextDouble() * 2.0D);
             int k = MathHelper.func_76128_c(this.field_179475_a.func_226281_cx_() - 1.0D + random.nextDouble() * 2.0D);
             BlockPos blockposition = new BlockPos(i, j, k);
-            BlockState iblockdata = world.func_180495_p(blockposition);
+            BlockState iblockdata = world.getTypeIfLoaded(blockposition); // Paper
+            if (iblockdata == null) return; // Paper
             BlockPos blockposition1 = blockposition.func_177977_b();
             BlockState iblockdata1 = world.func_180495_p(blockposition1);
             BlockState iblockdata2 = this.field_179475_a.func_195405_dq();
