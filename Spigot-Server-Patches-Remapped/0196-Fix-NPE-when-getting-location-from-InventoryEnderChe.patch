From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Shane Freeder <theboyetronic@gmail.com>
Date: Sat, 10 Mar 2018 13:03:49 +0000
Subject: [PATCH] Fix NPE when getting location from InventoryEnderChest opened
 by plugins


diff --git a/src/main/java/net/minecraft/inventory/EnderChestInventory.java b/src/main/java/net/minecraft/inventory/EnderChestInventory.java
index fc1b3d75ee903e3d392207f6f7bc70ca73121bbb..fdbf21032bf19e6540e130276ee1dba059a90b70 100644
--- a/src/main/java/net/minecraft/inventory/EnderChestInventory.java
+++ b/src/main/java/net/minecraft/inventory/EnderChestInventory.java
@@ -10,7 +10,7 @@ import org.bukkit.inventory.InventoryHolder;
 
 public class EnderChestInventory extends Inventory {
 
-    private EnderChestTileEntity field_70488_a;
+    private EnderChestTileEntity field_70488_a; public EnderChestTileEntity getTileEntity() { return field_70488_a; } // Paper - OBFHELPER
     // CraftBukkit start
     private final PlayerEntity owner;
 
@@ -20,6 +20,7 @@ public class EnderChestInventory extends Inventory {
 
     @Override
     public Location getLocation() {
+        if (getTileEntity() == null) return null; // Paper - return null if there is no TE bound (opened by plugin)
         return new Location(this.field_70488_a.func_145831_w().getWorld(), this.field_70488_a.func_174877_v().func_177958_n(), this.field_70488_a.func_174877_v().func_177956_o(), this.field_70488_a.func_174877_v().func_177952_p());
     }
 
