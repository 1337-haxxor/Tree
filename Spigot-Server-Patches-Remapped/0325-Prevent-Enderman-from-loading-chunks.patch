From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Shane Freeder <theboyetronic@gmail.com>
Date: Tue, 18 Dec 2018 02:15:08 +0000
Subject: [PATCH] Prevent Enderman from loading chunks


diff --git a/src/main/java/net/minecraft/entity/monster/EndermanEntity.java b/src/main/java/net/minecraft/entity/monster/EndermanEntity.java
index 5408822ca2c14d00a9683476ad40cef247b5d304..3c02979be6670415ea53fa6658450baa26980a97 100644
--- a/src/main/java/net/minecraft/entity/monster/EndermanEntity.java
+++ b/src/main/java/net/minecraft/entity/monster/EndermanEntity.java
@@ -433,7 +433,8 @@ public class EndermanEntity extends MonsterEntity implements IAngerable {
             int j = MathHelper.func_76128_c(this.field_179473_a.func_226278_cu_() + random.nextDouble() * 3.0D);
             int k = MathHelper.func_76128_c(this.field_179473_a.func_226281_cx_() - 2.0D + random.nextDouble() * 4.0D);
             BlockPos blockposition = new BlockPos(i, j, k);
-            BlockState iblockdata = world.func_180495_p(blockposition);
+            BlockState iblockdata = world.getTypeIfLoaded(blockposition); // Paper
+            if (iblockdata == null) return; // Paper
             Block block = iblockdata.func_177230_c();
             Vector3d vec3d = new Vector3d((double) MathHelper.func_76128_c(this.field_179473_a.func_226277_ct_()) + 0.5D, (double) j + 0.5D, (double) MathHelper.func_76128_c(this.field_179473_a.func_226281_cx_()) + 0.5D);
             Vector3d vec3d1 = new Vector3d((double) i + 0.5D, (double) j + 0.5D, (double) k + 0.5D);
@@ -475,7 +476,8 @@ public class EndermanEntity extends MonsterEntity implements IAngerable {
             int j = MathHelper.func_76128_c(this.field_179475_a.func_226278_cu_() + random.nextDouble() * 2.0D);
             int k = MathHelper.func_76128_c(this.field_179475_a.func_226281_cx_() - 1.0D + random.nextDouble() * 2.0D);
             BlockPos blockposition = new BlockPos(i, j, k);
-            BlockState iblockdata = world.func_180495_p(blockposition);
+            BlockState iblockdata = world.getTypeIfLoaded(blockposition); // Paper
+            if (iblockdata == null) return; // Paper
             BlockPos blockposition1 = blockposition.func_177977_b();
             BlockState iblockdata1 = world.func_180495_p(blockposition1);
             BlockState iblockdata2 = Block.getValidBlockForPosition(getEnderman().func_195405_dq(), getEnderman().field_70170_p, blockposition); // Paper - Fix MC-124320
