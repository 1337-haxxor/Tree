From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: AJMFactsheets <AJMFactsheets@gmail.com>
Date: Fri, 17 Jan 2020 17:17:54 -0600
Subject: [PATCH] Fix items not falling correctly

Since 1.14, Mojang has added an optimization which skips checking if
an item should fall every fourth tick.

However, Spigot's entity activation range class also has an
optimization which skips ticking active entities every fourth tick.
This can result in a state where an item will never properly fall
due to its move method never being called.

This patch resolves the conflict by offsetting checking an item's
move method from Spigot's entity activation range check.

diff --git a/src/main/java/net/minecraft/entity/item/ItemEntity.java b/src/main/java/net/minecraft/entity/item/ItemEntity.java
index 1a92a09b10eee39d5abad55382046f3c6930eaf6..b71cb5c89ffe284d3184eab8b088c6a0b67d2537 100644
--- a/src/main/java/net/minecraft/entity/item/ItemEntity.java
+++ b/src/main/java/net/minecraft/entity/item/ItemEntity.java
@@ -115,7 +115,7 @@ public class ItemEntity extends Entity {
                 }
             }
 
-            if (!this.field_70122_E || func_213296_b(this.func_213322_ci()) > 9.999999747378752E-6D || (this.field_70173_aa + this.func_145782_y()) % 4 == 0) {
+            if (!this.field_70122_E || func_213296_b(this.func_213322_ci()) > 9.999999747378752E-6D || this.field_70173_aa % 4 == 0) { // Paper - Ensure checking item movement is always offset from Spigot's entity activation range check
                 this.func_213315_a(MoverType.SELF, this.func_213322_ci());
                 float f1 = 0.98F;
 
