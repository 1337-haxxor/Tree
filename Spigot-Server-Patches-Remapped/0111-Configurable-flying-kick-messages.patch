From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: kashike <kashike@vq.lc>
Date: Tue, 20 Sep 2016 00:58:01 +0000
Subject: [PATCH] Configurable flying kick messages


diff --git a/src/main/java/com/destroystokyo/paper/PaperConfig.java b/src/main/java/com/destroystokyo/paper/PaperConfig.java
index 23c9e0f317073bb9c327ec49e0b0586d2123e4e9..c4086de778cc2ccc958b1a94dd6e9cdb5065076c 100644
--- a/src/main/java/com/destroystokyo/paper/PaperConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperConfig.java
@@ -253,4 +253,11 @@ public class PaperConfig {
         }
         packetInSpamThreshold = getInt("settings.incoming-packet-spam-threshold", 300);
     }
+
+    public static String flyingKickPlayerMessage = "Flying is not enabled on this server";
+    public static String flyingKickVehicleMessage = "Flying is not enabled on this server";
+    private static void flyingKickMessages() {
+        flyingKickPlayerMessage = getString("messages.kick.flying-player", flyingKickPlayerMessage);
+        flyingKickVehicleMessage = getString("messages.kick.flying-vehicle", flyingKickVehicleMessage);
+    }
 }
diff --git a/src/main/java/net/minecraft/network/play/ServerPlayNetHandler.java b/src/main/java/net/minecraft/network/play/ServerPlayNetHandler.java
index f5cff4b504e102e4205cf837324101909c3c3a84..a1fc73fcfef985bebe02509862a94e4c0ee062e4 100644
--- a/src/main/java/net/minecraft/network/play/ServerPlayNetHandler.java
+++ b/src/main/java/net/minecraft/network/play/ServerPlayNetHandler.java
@@ -289,7 +289,7 @@ public class ServerPlayNetHandler implements IServerPlayNetHandler {
         if (this.field_184344_B && !this.field_147369_b.func_70608_bn()) {
             if (++this.field_147365_f > 80) {
                 ServerPlayNetHandler.field_147370_c.warn("{} was kicked for floating too long!", this.field_147369_b.func_200200_C_().getString());
-                this.func_194028_b(new TranslationTextComponent("multiplayer.disconnect.flying"));
+                this.disconnect(com.destroystokyo.paper.PaperConfig.flyingKickPlayerMessage); // Paper - use configurable kick message
                 return;
             }
         } else {
@@ -308,7 +308,7 @@ public class ServerPlayNetHandler implements IServerPlayNetHandler {
             if (this.field_184345_D && this.field_147369_b.func_184208_bv().func_184179_bs() == this.field_147369_b) {
                 if (++this.field_184346_E > 80) {
                     ServerPlayNetHandler.field_147370_c.warn("{} was kicked for floating a vehicle too long!", this.field_147369_b.func_200200_C_().getString());
-                    this.func_194028_b(new TranslationTextComponent("multiplayer.disconnect.flying"));
+                    this.disconnect(com.destroystokyo.paper.PaperConfig.flyingKickVehicleMessage); // Paper - use configurable kick message
                     return;
                 }
             } else {
